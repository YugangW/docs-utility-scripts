                    __    __ _           _
                    / / /\ \ (_)_ __  ___| |_ ___  _ __
                    \ \/  \/ / | '_ \/ __| __/ _ \| '_ \
                    \  /\  /| | | | \__ \ || (_) | | | |
                     \/  \/ |_|_| |_|___/\__\___/|_| |_|

                        the Cloud Foundry App Pusher

This script pushes green and blue apps to staging and production, maps routes,
and adds basic auth to staging apps.

Prerequisites
-------------
Before you use this script, you must be able to:

- Bind a book with Bookbinder.
- Connect to the VMware VPN.
- Log in to PWS using the cf CLI.

Push an App to PWS
------------------
To push a Cloud Foundry app to PWS using Winston the App Pusher:

1. Bind a book and change to the final_app directory.

2. Run the following command to make a local, editable copy of the app pusher script:

    `cp ~/workspace/docs-utility-scripts/winston-the-app-pusher/app-pusher.sh .`

3. Open your copy of app-pusher.sh in a text editor.

4. Replace the following values:
  - VERSION="VERSION-NUMBER"
  - APP_NAME="PRODUCT-NAME-${VERSION}"
  - URL="PRODUCT-PATH/${VERSION}"

  Where:
  - VERSION-NUMBER is the version number you want in the app name.
  - PRODUCT-NAME is the app name you want to use.
    Make sure you keep the hyphen and the variable after the app name!
  - PRODUCT-PATH is the path where you want to publish the app.
    Keep the variable that follows the slash!

  For example, these are the variables for the Ops Manager 2.8 app:
  - VERSION="2-8"
  - APP_NAME="om-${VERSION}"
  - URL="ops-manager/${VERSION}"

1. (Optional) Make other adjustments to the apps that will be pushed by editing L33
onwards of the app-pusher.sh file.
For example, you can comment out the lines for apps you do not want to push, or
you can copy the lines for basic auth from the staging apps section to the prod apps
section if you also want basic auth for your production apps.

5. Save and close your copy of app-pusher.sh.

6. Log in to the cf CLI using your credentials.

7. Run `bash app-pusher.sh`.

That's it! Now you're ready to create and run your pipelines!

................................................................................
................................................................................
...........................................III..................................
.......................................=7I???II7II??????~.......................
.....................................III?+++III???++===+=++.....................
..........................,,..?.....7I?++++???++++==========,...................
.......................IIIII7IIIIII??+?+++????++===~~~~~~~~=~,..................
...................IIIIII???III+=+~:==++++??++=~~~~~:~~~~~~~~~,:~~..............
.................III????????III~~,,,=====??===:::~~=~~~~:~~~=,,,,::.............
..............=??????+????II??~.~::,====++=~~:,,,,.,,~~~:::~~,,,,,::,...........
.............I??++++++????III?:,~,,,+===+==:,,.,,~,,,,,,:::~~,::.,,,::..........
...........7I??+++++++??????I+::~::===~==~~,,,,,,,,,,:::::::::::~,::::..........
..........II???+====+??+????I?:::~=?=~==~~:,,,,,,,,,:::~:::::::::,::::..........
........II??+++++++=+?????????::,+?+==~~~::::::,,,:::~~::~:::::,,:.,::..........
........II?++==++++++?????????~:,??==~~~~::~::::,:::~~~:~::::::,::,.::..........
.......???+=~====++++?+???????+~+===~~~~:::::::~:::~~:~::::::,:...,.::..........
......=??+==~~~===+++??????+???+=::~:::::::::::~~~~~::::~~:::,,...,,::..........
......+?++==~~~=+++++?????++???::::,::::::::,:::::~:::::~~~:,,:=....~:..........
......++++===~~=++++????+?++??=~~~:::::::::,,,::::::::::~~:::::~=...~:,.........
.......========~+++???++????=~:::,,,,,,,:,,,,,,,::~::::~~~:::~:::...::~.........
.......=+=~====~=++??????++?,,,,,,,.,,,,,,,,,,,,,::::~~~~:~::~:::...~::.........
........==~=~~~===++++++++++?=,,...,,,,,,,,,,,,.::::::~~~~::,:::~.....~:........
.........=~~~~~~+==+++++?+++I=,.,,,,,,,,,,,,,,,,::::::~:~~:::::~~.....~~........
...........~~~~::====++++++?II=,:=~,,,,,,,,.,,,::::::~~~:::,,::,.,.....~~.......
............,~=~::+====++?II+~:~I+~..,,+...,.:,,:::::~~~~:,,,,.,,=......~:......
.............:==~::~~===++7I?~:II:=,~:,,,,,:::,,,:~::~~:::,,,..::~.......~......
.............~=+==::=~=~=I~~::?II.,:,,,,,,,=~:,,,:::~:::::::.,,~:~..............
.............++==~=::==+I+~==?III++::::,.,,.~~:::::~~~~~:...,::=~~=.............
............,?+=~=+:,~~7+:~~??I?I+=~:::::,,,,=~~~::,.,:.,,,.:,,,~~+.............
...........??~~~:~:,~~?,,~:+?I???+=~~~~~::::,,,,.......,,,,:,::::==.............
...........,=.,,:,,=.....~=+?I??+=~~~:::~:::::,:,::,,::,,,:,:,::~~~.............
...........,:,,,.,.........:?I??+=~::::::~~:::::::::::,,::::,:,~::~.............
...............:............II?++~~~:::::::~::::::~:::::,::,:,:~::~.............
............................I??==~~::::::::~::::::~:::,:::,,,,:~~:~.............
............................??+=~~~:::::,::::::::::::,:,::,,,.,~:=:=............
............................++=:::,,::,:,,::::::,:,::,,,,,,,,:,::.?I............
...........................=+==~~:::,,,,,,,,::::,:,,,,,,,,,,.,,::~=?............
..........................,++==~~~~~~~~:,,,,,,,:,,,,,,,,,,.,~:~~~~++............
..........................=~+=~~~~====~::,,,,,,,,,,,,,,,,,,.,,::~~~=............
.............................,=~~~====~::,:..,,,,,,,,,,,::::~~~~~~,.............
...............................:~===+==~::,,,:,::,:::,,:::::~~~~~:..............
.................................,:=++=~::,:,,::~~~,.:,,,:::~~:~:...............
...................................:+?==:::~:::~~::.,,:::~~~~~~.................
....................................+?++~~~::=:=~~..,,,,,:::~,..................
....................................??++=:~~~~~,~...............................
....................................++~~=:,:~:::................................
....................................==:,::::::,,................................
....................................?=,,::.,,,..................................
....................................,,,,,,,...,.................................
................................................................................
................................................................................
